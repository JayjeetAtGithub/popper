#!/bin/bash
set -ex
# shellcheck source=./ci/test/common
source ./common
init_test_repo

cd "$test_repo_path"

popper ci --service travis
test -f .travis.yml
cat .travis.yml

popper ci --service circle
test -f .circleci/config.yml
cat .circleci/config.yml

popper ci --service jenkins
test -f Jenkinsfile
cat Jenkinsfile

popper ci --service gitlab
test -f .gitlab-ci.yml
cat .gitlab-ci.yml

popper ci --service travis --with-singularity
test -f .travis.yml
cat .travis.yml

popper ci --service circle --with-singularity
test -f .circleci/config.yml
cat .circleci/config.yml

! popper ci --service jenkins --with-singularity

! popper ci --service gitlab --with-singularity
